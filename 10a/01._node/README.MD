# ğŸ“š 10a - Document A Database (Knex + PostgreSQL)

## âœ… Opgaveformulering
    Use a tool to document any database.â€

Jeg har valgt at bruge Knex.js til at oprette og dokumentere en PostgreSQL-database. Knex gÃ¸r det muligt at definere database-skemaer med kode, tracke Ã¦ndringer (migrations), indsÃ¦tte testdata (seeds) og versionere databasen nemt i et udviklingsprojekt.

Type: Individual
Valgt database: PostgreSQL
Tool anvendt: Knex.js (query builder og migrationsvÃ¦rktÃ¸j)

Denne opgave dokumenterer en PostgreSQL-database ved hjÃ¦lp af **Knex.js** â€“ et SQL query builder-vÃ¦rktÃ¸j for Node.js.  
Knex bruges her til at **oprette tabeller (migrations)** og **indsÃ¦tte testdata (seeds)**.

âš™ï¸ Setup & Teknisk miljÃ¸
Komponent	Beskrivelse
PostgreSQL	Database kÃ¸rt i en Docker-container
Knex.js	Tool til migration og seed via Node.js
Docker Compose	Til at spinne databasen op lokalt
.env-fil	Indeholder konfigurationsvariabler

ğŸ§° VÃ¦rktÃ¸jer og teknologier anvendt
VÃ¦rktÃ¸j / Teknologi	Beskrivelse
PostgreSQL	Relationsdatabase til lagring af data. KÃ¸rer i Docker-container.
Docker & Docker Compose	Til at spinne PostgreSQL op lokalt med miljÃ¸variabler og volumes.
Knex.js	Node.js-baseret query builder. Bruges til migration og seed af databasen.
Node.js	JavaScript-runtime brugt til at kÃ¸re Knex og scripts.
dotenv	Loader miljÃ¸variabler fra .env fil til Node.js-applikationen.
psql (PostgreSQL CLI)	Command line-vÃ¦rktÃ¸j til at tilgÃ¥ databasen og inspicere tabeller/data.
VSCode (valgfri)	Editor til at skrive migrations, seed og konfigurationsfiler.
Markdown / README.md	Dokumentation af databasen og processen.
(Valgfri) ER-diagramvÃ¦rktÃ¸j	fx dbdiagram.io eller draw.io til at vise datamodel.
---

ğŸ§± Struktur af databasen
ğŸ”¹ Tabeller

users

    id â€“ integer, primÃ¦r nÃ¸gle

    first_name â€“ varchar(255)

    last_name â€“ varchar(255)

products

    id â€“ integer, primÃ¦r nÃ¸gle

    name â€“ varchar(1000)

    price â€“ decimal


ğŸ› ï¸ Implementeringsproces
1. Initiering

npm init -y
npm install knex pg dotenv
npx knex init

ğŸ§± Migration: Opret skema

npx knex migrate:make create_users_products_table
KÃ¸r migration

npx knex migrate:latest

ğŸŒ± Seed data

npx knex seed:make seed_users

KÃ¸r seeding

npx knex seed:run

ğŸ§ª Verificering

Inde i containeren:

docker exec -it <container_id> psql -U myuser -d mydatabase

Tjek tabeller:

\dt
SELECT * FROM users;










## ğŸ§° Teknologier brugt

| Teknologi       | Beskrivelse                             |
|----------------|------------------------------------------|
| **PostgreSQL**  | Relationsdatabase, hostet i Docker       |
| **Knex.js**     | Migrations + seeding + SQL abstraction   |
| **Docker Compose** | Starter container med DB + volume persistence |
| **psql**        | CLI-vÃ¦rktÃ¸j til at tilgÃ¥ og inspicere databasen |

---

## ğŸ—ï¸ Struktur & Data

### ğŸ”¹ Tabeller
```text
users
â”œâ”€â”€ id (int, primary key)
â”œâ”€â”€ first_name (varchar)
â””â”€â”€ last_name (varchar)

products
â”œâ”€â”€ id (int, primary key)
â”œâ”€â”€ name (varchar)
â””â”€â”€ price (decimal)


Setup:
1. Clone repo og installÃ©r dependencies

npm install

2. Start PostgreSQL med Docker

docker compose up

3. KÃ¸r migration

npx knex migrate:latest

4. KÃ¸r seed for testdata

npx knex seed:run

ğŸ“‹ Eksempeldata (fra seeding)

-- SELECT * FROM users;
+----+------------+-----------+
| id | first_name | last_name|
+----+------------+-----------+
| 1  | John       | Doe       |
| 2  | Jane       | Smith     |
| 3  | Alice      | Johnson   |
+----+------------+-----------+

ğŸ“¦ Backup & Dokumentation (Bonus)

    Backup kan foretages via:

docker exec -T <container_id> pg_dump -U myuser mydatabase > pgdump.sql

    Dokumentation er i denne README

    Migrationer og seeds findes i mappen:

        /migrations

        /seeds